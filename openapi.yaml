openapi: 3.1.0
info:
  title: Progetto Sviluppo Web
  version: 1.0.0
  description: Documentazione delle API del server
servers:
  - url: https://localhost:3000
    description: Server https
  - url: http://localhost:3001
    description: Server https usato per le applicazioni che necessitano certificati firmati per operare in https (es. stripe)
paths:
  /:
    get:
      summary: fornisce la homepage in base al tipo di utente (o ospite) o esegue redirect in caso di artigiano senza attività registrata o utente che necessita rinnovo dell'accessToken
      responses:
        '200':
          description: file html della homepage tipo di utente corretto 
          content:
            text/html:
              schema:
                type: string
        '302':
          description: Redirect ad altre pagine
          headers:
            Location:
              description: esegue inoltro per il corretto caricamento della homepage o forza la registrazione dell'attività come priorità per l'account artigiano 
              schema:
                type: string
              examples:
                regact:
                  summary: se l'utente è un artigiano ma non ha un'attività registrata a suo nome è forzato a farlo prima di accedere al sito
                  value: "/regact"
                renewToken: 
                  summary: in caso di richiesta con refreshToken ma senza accessToken avviene il redirect con il parametro from=/ per il ritorno alla homepage in caso di successo
                  value: "/renewToken"
  /registrazione:
    get:
      summary: fornisce la pagina per eseguire la registrazione
      responses:
        '200':
          description: file html della pagina di registrazione
          content:
            text/html:
              schema:
                type: string
    post:
      summary: invio informazioni per registrazione al server
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                surname:
                  type: string
                username:
                  type: string
                email:
                  type: string
                phone: 
                  type: string
                password:
                  type: string
                user_type:
                  type: number
              required:
                - name
                - surname
                - username
                - email
                - phone
                - password
                - user_type
              example:
                name: gabriele
                surname: todeschini
                username: gtode
                email: gtodeschini1@studenti.uninsubria.it
                phone: 1122334455
                password:
                user_type:
      responses:
        '200':
          description: utente registrato correttamente
          content: {}
        '400':
          description: informazioni richieste parzialmente o completamente mancanti
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "missing info" 
        '409':
          description: email o username già presenti nel database
          content:
            application/json:
              schema:
                type: object
                properties: 
                  err:
                    type: string
              examples:
                EmailDuplicata:
                  summary: email già presente nel db
                  value: 
                    err: "mail" 
                UsernameDuplicato:
                  summary: username già presente nel db
                  value: 
                    err: "username" 
        '500':
          description: errore sconosciuto nel server
          content: {}
  /regact:
    get:
      summary: fornisce la pagina per eseguire la registrazione dell'attività
      responses:
        '200':
          description: file html della pagina di registrazione dell'attività
          content:
            text/html:
              schema:
                type: string
        '302':
          description: rediect a homepage se l'utente non deve registrare un'attività 
          headers:
            Location:
              description: redirect a homepage
              schema:
                type: string
              examples:
                /:
                  summary: se usertype non corrisponde a quello dell'artigiano o se l'artigiano ha già un'attività registrata viene rimandato alla homepage
                  value: "/"     
    post:
      summary: invio informazioni per registrazione attività al server
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                phone:
                  type: string
                address:
                  type: string
                desc: 
                  type: string
                
              required:
                - name
                - email
                - phone
                - address
                - desc
              example:
                name: bricolage da mario
                email: bricolagedamario@gmail.com
                phone: 6677889900
                address: Via Roma 15, Milano
                desc: tutto il necessario per il bricolage e il fai da te
      responses:
        '200':
          description: attività registrata correttamente
          content: {}
        '400':
          description: informazioni richieste parzialmente o completamente mancanti
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "missing info" 
        '401':
          description: AccessToken mancante o invalido
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token" 
        '409':
          description: attività già registrata
          content:
            application/json:
              schema:
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "ex"
        '500':
          description: errore sconosciuto nel server
          content: {}
  /login:
    get:
      summary: fornisce la pagina per eseguire il login
      responses:
        '200':
          description: file html della pagina di login
          content:
            text/html:
              schema:
                type: string
    post:
      summary: invio informazioni per registrazione attività al server
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                cred:
                  type: string
                pw:
                  type: string
              required:
                - cred
                - pw
              example:
                cred: gtode
                pw: Password
      responses:
        '200':
          description: login eseguito correttamente
          content: {}
        '401':
          description: informazioni errate
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "wrong info" 
        '403':
          description: account bannato
          content:
            application/json:
              schema:
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "banned"
  /renewToken:
    get:
      summary: fornisce la pagina per ottenere un nuovo accessToken
      responses:
        '200':
          description: file html della pagina di renewToken
          content:
            text/html:
              schema:
                type: string
    post:
      summary: chiamata alla route per il rinnovo dell'accessToken
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                cred:
                  type: string
                pw:
                  type: string
              required:
                - cred
                - pw
              example:
                cred: gtode
                pw: Password
      responses:
        '200':
          description: refreshToken rinnovato correttamente
          content: {}
        '401':
          description: refreshToken rimosso in quanto mancante / non valido
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "rem" 
  /logout:
    delete:
      summary: rimuove token dall'utente e elimina refreshToken dal database
      responses:
        '200':
          description: logout eseguito correttamente
          content: {}
  /addProduct:
    post:
      summary: invio informazioni per inserire un prodotto
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                descr:
                  type: string
                price:
                  type: number
                amm: 
                  type: number
                cat:
                  type: string
              required:
                - name
                - descr
                - price
                - amm
                - cat
              example:
                name: Kit brugole esagonali
                descr: lunghezza 64mm 
                price: 1.50
                amm: 33
                cat: Materiali per artigianato
      responses:
        '200':
          description: inserimento prodotto eseguito correttamente
          content: {}
        '401':
          description: account non autorizzato ad inserire il prodotto
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
                banned: 
                  summary: l'account che sta provando a inserire il prodotto è stato bannato
                  value:
                    err: "banned"
                usertype:
                  summary: tipo utente diverso da quello dell'artigiano
                  value:
                    err: "usertype"
        '500':
          description: errore sconosciuto nel server
          content: {}
  /product:
    post:
      summary: richiesta invio prodotti
      requestBody:
        required: false
        content: 
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
              example:
                id: 1
      responses:
        '200':
          description: invio prodotti trovati
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  prodotti:
                    type: array
                    items:
                      type: object
                      properties:
                        id: 
                          type: number
                        name:
                          type: string 
                        descr:
                          type: string
                        costo:
                          type: number
                        amm: 
                          type: number
                        banned:
                          type: boolean
                        cat: 
                          type: string
                        actid: 
                          type: number
                        nome_attivita:
                          type: string 
                  usertype:
                    type: number
              examples:
                nessunProdotto:
                  summary: nessun prodotto trovato
                  value: 
                    prodotti: "0" 
                utenteLoggato:
                  summary: utente ha eseguito correttamente l'accesso
                  value: 
                    prodotti:
                      - id: 1
                        name: Kit brugole esagonali
                        descr: lunghezza 64mm 
                        costo: 1.50
                        amm: 33
                        banned: false
                        cat: Materiali per artigianato
                        actid: 1
                        nome_attivita: bricolage da mario
                    usertype: 1    
                utenteAnonimo:
                  summary: utente ha eseguito correttamente l'accesso
                  value: 
                    prodotti:
                      - id: 1
                        name: Kit brugole esagonali
                        descr: lunghezza 64mm 
                        costo: 1.50
                        amm: 33
                        banned: false
                        cat: Materiali per artigianato
                        actid: 1
                        nome_attivita: bricolage da mario
                    usertype: 3     
                prodottoSpecificoLoggato: 
                  summary: utente richiede i dettagli di un prodotto specifico
                  value: 
                    prodotti:
                      id: 1
                      name: Kit brugole esagonali
                      descr: lunghezza 64mm 
                      costo: 1.50
                      amm: 33
                      banned: false
                      cat: Materiali per artigianato
                      actid: 1
                      nome_attivita: bricolage da mario
                    usertype: 1 
                prodottoSpecificoAnonimo: 
                  summary: utente non loggato richiede i dettagli di un prodotto specifico
                  value: 
                    prodotti:
                      id: 1
                      name: Kit brugole esagonali
                      descr: lunghezza 64mm 
                      costo: 1.50
                      amm: 33
                      banned: false
                      cat: Materiali per artigianato
                      actid: 1
                      nome_attivita: bricolage da mario
                    usertype: 3 
    patch:
      summary: modifica del prodotto
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                nome:
                  type: string 
                descr:
                  type: string
                prezzo:
                  type: number
                qt:
                  type: number
                cat:
                  type: string
              required:
                - id
              example:
                id: 1
                name: Kit brugole esagonali
                descr: lunghezza 32mm 
                price: 1.25
                amm: 12
                cat: Materiali per artigianato
      responses:
        '200':
          description: modifica prodotto eseguita correttamente
          content: {}
        '400':
          description: id mancante
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "missing id" 
        '401':
          description: account non autorizzato modificare il prodotto
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
                missingproduct: 
                  summary: il prodotto non è stato trovato, ipoteticamente è stato bannato
                  value:
                    err: "missing product"
        '500':
          description: errore sconosciuto del server
          content: {}
    delete:
      summary: eliminazione del prodotto
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                pid:
                  type: number
          
              required:
                - pid
              example:
                pid: 1
      responses:
        '200':
          description: eliminazione prodotto eseguita correttamente
          content: {}
        '400':
          description: id mancante
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "no product" 
        '401':
          description: account non autorizzato a eliminare il prodotto
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
  /cart:
    post:
      summary: inserimento prodotto nel carrello
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                dec:
                  type: string
              required:
                - id
              example:
                pid: 1
                dec: r
      responses:
        '200':
          description: prodotto inserito correttamente nel carrello
          content: {}
        '400':
          description: id prodotto mancante o tipo dec errato
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                missingId: 
                  summary: id prodotto mancante
                  value:
                    err: "missing id" 
                invalidDec:
                  summary: dec non contiene ne r (rimuovi) ne d (decrementa)
                  value:
                    err: "invalid dec"
        '401':
          description: account non autorizzato a inserire il prodotto nel carrello
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
                unauthorized:
                  summary: utente non autorizzato a inserire il prodotto nel carrello
                  value: 
                    err: "unauthorized"  
        '404':
          description: prodotto non disponibile nel db
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "product removed"
        '409':
          description: quantità prodotti nel carrello errata
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                max:
                  summary: quantità massima prodotti raggiunta - quanttià nel carrello = quanttià nel db
                  value: 
                    err: "max" 
                zero:
                  summary: quantità prodotto = 0
                  value: 
                    err: "0"     
        '500':
          description: errore sconosciuto del server
          content: {}
    get:
      summary: richiesta carrello
      responses:
        '200':
          description: invio carrello
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  carrello:
                    type: array
                    items:
                      type: object
                      properties:
                        id: 
                          type: number
                        name:
                          type: string 
                        descr:
                          type: string
                        costo:
                          type: number
                        amm: 
                          type: number
                        banned:
                          type: boolean
                        cat: 
                          type: string
                        actid: 
                          type: number
                        uid:
                          type: number
                        quantita:
                          type: number
                  usertype:
                    type: number
              example:
                carrello: 
                  - id: 1
                    name: Kit brugole esagonali
                    descr: lunghezza 64mm 
                    costo: 1.50
                    amm: 33
                    banned: false
                    cat: Materiali per artigianato
                    actid: 1
                    uid: 2
                    quantita: 2
        '401':
          description: account non autorizzato a visualizzare il  carrello
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
    delete:
      summary: richiesta svuotamento carrello
      responses:
        '200':
          description: svuotamento carrello eseguito correttamente
          content: {}
        '401':
          description: account non autorizzato a svuotare  il  carrello
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
  /report:
    post:
      summary: inserimento report
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                productid:
                  type: number
                dove:
                  type: string
                desc:
                  type: string
              required:
                - productid
                - dove
                - desc
              example:
                productid: 1
                dove: nome prodotto
                desc: nome offensivo
      responses:
        '200':
          description: report inserito correttamente
          content: {}
        '400':
          description: informazioni mancanti
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err:: "missing info"
        '401':
          description: account non autorizzato a inserire il report
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
    get:
      summary: caricamento report
      responses:
        '200':
          description: report caricati correttamente
          content: {}
        '401':
          description: account non autorizzato a visualizzare i report
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
    patch:
      summary: chiusura report
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                
              required:
                - id
              example:
                id: 1
      responses:
        '200':
          description: report rimosso correttamente
          content: {}
        '400':
          description: informazioni mancanti
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err:: "missing id"
        '401':
          description: account non autorizzato a inserire il report
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
                usertype:
                  summary: tipo utente errato
                  value:
                    err: "usertype"
        '500':
          description: errore sconosciuto del server
          content: {}
  /ban:
    post:
      summary: ban utente o prodotto
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: number
                type:
                  type: string
              required:
                - id
                - type
              example:
                id: 1
                type: 0
      responses:
        '200':
          description: ban eseguto correttamente
          content: {}
        '400':
          description: informazioni mancanti
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err:: "missing info"
        '401':
          description: account non autorizzato a eseguire il ban
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
                usertype:
                  summary: tipo utente errato
                  value:
                    err: "usertype"
        '500':
          description: errore sconosciuto del server
          content: {}
    get:
      summary: fornisce pagina statica ban
      responses:
        '200':
          description: report rimosso correttamente
          content:
            text/html:
              schema:
                type: string
  /artigiani:
    post:
      summary: richiesta artigiani
      responses:
        '200':
          description: invio artigiani trovati
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  art:
                    type: array
                    items:
                      type: object
                      properties:
                        actid:
                          type: number
                        nome:
                          type: string
              example:
                - actid: 1
                  type: bricolage da mario
        '500':
          description: errore sconosciuto del server
          content: {}
  /userArea: 
    get:
      summary: carica la userarea corretta (artigiano, utente o admin)
      responses:
        '200':
          description: file html della pagina di userArea
          content:
            text/html:
              schema:
                type: string
        '302':
          description: rediect a renewtoken o a regact 
          headers:
            Location:
              description: redirect alle pagine 
              schema:
                type: string
              examples:
                /renewtoken:
                  summary: se accessToken non è verificabile lo inoltra a renewtoken
                  value: "/renewtoken"  
                /regact:  
                  summary: se artigiano non ha un'attività lo reindirizza a registrazione attività
  /user:
    post:
      summary: richiesta informazioni utente e attività
      requestBody:
        required: false
        content: 
          application/json:
            schema:
              type: object
              properties:
                act:
                  type: boolean
              example:
                act: false
      responses:
        '200':
          description: invio prodotti trovati
          content:
            application/json:
              schema: 
                oneof:
                  - type: object  
                    properties:
                      nome: 
                        type: string
                      cognome: 
                        type: string
                      username:
                        type: string
                      email:
                        type: string
                      ntel:
                        type: string
                  - type: object  
                    properties:
                      actid: 
                        type: number
                      nome: 
                        type: string
                      indirizzo:
                        type: string
                      email:
                        type: string
                      ntel:
                        type: string
                      descr:
                        type: string
              examples:
                user:
                  summary: informazioni utente
                  value: 
                    nome: gabriele 
                    cognome: todeschini
                    username: gtode
                    email: gtodeschini1@studenti.uninsubria.it
                    ntel: 1122334455
                attivita:
                  summary: informazioni attività
                  value: 
                    actid: 1
                    nome: bricolage da mario
                    indirizzo: Via Roma 12 Milano 
                    email: bricolagedamario@gmail.it
                    ntel: 6677889900
                    descr: negozio dedicato a bricolage e fai da te
        '401':
          description: account non autorizzato a visualizzare le informazioni dell'utente o dell'attività
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"          
        '500':
          description: errore sconosciuto del server
          content: {}
  /editact:
    get:
      summary: caricamento pagina modifica attività
      responses:
        '200':
          description: report inserito correttamente
          content:
            text/html:
              schema:
                type: string
        '302':
          description: rediect a userarea 
          headers:
            Location:
              description: redirect alla pagina 
              schema:
                type: string
              example:
                value: /userArea
  /act:
    patch:
      summary: modifica dell'attività 
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string 
                email:
                  type: string
                ntel:
                  type: string
                
                descr:
                  type: string
                
              example:
                nome: bricolage da mario
                email: bricolagedamario@gmail.it
                ntel: 1234567890
      responses:
        '200':
          description: modifica prodotto eseguita correttamente
          content: {}
        '400':
          description: nessun valore modificato 
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "no value" 
        '401':
          description: account non autorizzato modificare il prodotto
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}
  /updateUser:
    patch:
      summary: modifica dell'utente 
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                nome:
                  type: string 
                cognnome:
                  type: string 
                username:
                  type: string 
                email:
                  type: string
                ntel:
                  type: string
              example:
                nome: mario
                cognome: rossi
                email: mariorossi1971@gmail.com
                ntel: 1234567890
      responses:
        '200':
          description: modifica utente eseguita correttamente
          content: {}
        '400':
          description: nessun valore modificato 
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "empty" 
        '401':
          description: account non autorizzato modificare il prodotto
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"  
        '500':
          description: errore sconosciuto del server
          content: {}  
  /checkout:
    post:
      summary: esegue operazioni iniziali per checkout 
      responses:
        '200':
          description: conferma inizio checkout
          content: {}
        '401':
          description: account non autorizzato a avviare il checkout
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"      
                unauthorized:
                  summary: tipo account errato     
        '404':
          description: carrello vuoto
          content: 
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "empty"
        '409':
          description: non ci sono abbastanza prodotti in magazzino per completare l'ordine
          content:
            application/json:
              schema:
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "not enough" 
        '500':
    get:
      summary: invia pagina per completare ilo checkout 
      responses:
        '200':
          description: conferma inizio checkout
          content:
            text/html:
              schema:
                type: string
        '302':
          description: Redirect a renewToken
          headers:
            Location:
              description: inoltra per verificare correttezza account se non è possibile verificare l'accessToken
              schema:
                type: string
              example:
                value: "/renewtoken"
  /confirmCheckout:
    post:
      summary: creazione pacchetto stripe completata, invio id 
      requestBody:
        required: true
        content: 
          application/json:
            schema:
              type: object
              properties:
                addr:
                  type: string
              required:
                - addr
              example:
                addr: Via Roma 12, Milano
      responses:
        '200':
          description: invio prodotti trovati
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  id:
                    type: string
              example:
                id: idSessioneStripe              
        '400':
          description: indirizzo mancante
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              example:
                err: "missing addr"
        '401':
          description: account non autorizzato a visualizzare le informazioni dell'utente o dell'attività
          content:
            application/json:
              schema: 
                type: object
                properties: 
                  err:
                    type: string
              examples:
                invalidToken:
                  summary: accessToken non valido
                  value: 
                    err: "invalid token" 
                missingToken:
                  summary: accessToken mancante
                  value: 
                    err: "missing token"
                noorder:
                  summary: ordine non trovato
                  value: 
                    err: "no order"           
        '500':
          description: errore sconosciuto del server
          content: {}
  /success:
    get:
      summary: fornisce pagina statica success
      responses:
        '200':
          description: report rimosso correttamente
          content:
            text/html:
              schema:
                type: string
  /cancel:
    get:
      summary: fornisce pagina statica cancellazione acquisto
      responses:
        '200':
          description: report rimosso correttamente
          content:
            text/html:
              schema:
                type: string
  